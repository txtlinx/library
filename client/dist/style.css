body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background: #0f172a; color: #e5e7eb; margin: 0; padding: 20px; line-height: 1.6; }
html { font-size: 16px; }
.container { max-width: 920px; margin: 0 auto; background: #111827; padding: 32px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
h1 { margin-top: 0; color: #f8fafc; font-size: 30px; letter-spacing: 0.2px; }
h2 { font-size: 22px; margin-top: 0; margin-bottom: 10px; color: #e5e7eb; letter-spacing: 0.2px; }
form input, form textarea { width: 100%; padding: 8px; margin-top: 6px; margin-bottom: 12px; border: 1px solid #334155; border-radius: 6px; background: #0b1220; color: #e5e7eb; }
button { background: #2563eb; color: white; padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 15px; padding: 10px 14px; transition: background-color 160ms ease, transform 120ms ease, box-shadow 160ms ease; }
button:hover { background: #1e40af; box-shadow: 0 6px 16px rgba(0,0,0,0.35); }
button:active { transform: translateY(1px); }
ul { list-style: none; padding-left: 0; margin: 0; }
li { padding: 18px; border: 1px solid #1f2937; border-radius: 8px; background: #0b1220; transition: border-color 160ms ease, box-shadow 160ms ease, transform 120ms ease; }
li:hover { border-color: #334155; box-shadow: 0 6px 18px rgba(0,0,0,0.45); }
small { color: #cbd5e1; font-size: 13px; }

/* Inputs y selects acorde al tema oscuro */
input[type="text"],
input[type="number"],
input[type="date"],
input[type="datetime-local"],
input[type="file"],
select,
textarea {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
  margin-bottom: 12px;
  border: 1px solid #3b445a; /* gris azulado oscuro */
  border-radius: 6px;
  background: #0b1220; /* fondo oscuro */
  color: #e5e7eb; /* texto claro */
  font-size: 15px;
  padding: 10px;
}

/* Icono del selector de calendario en datetime-local acorde a tema oscuro */
input[type="datetime-local"] {
  color-scheme: dark;
}
input[type="datetime-local"]::-webkit-calendar-picker-indicator {
  filter: invert(1) brightness(1.2);
  opacity: 0.9;
}
/* Para Firefox (no permite mucho estilo en indicador), asegurar contraste del texto */
input[type="datetime-local"]::-moz-placeholder { color: #9ca3af; }

select { cursor: pointer; }

input::placeholder,
textarea::placeholder { color: #9ca3af; }

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: #3b82f6; /* azul de foco */
  box-shadow: 0 0 0 3px rgba(59,130,246,0.22);
}

label { color: #e5e7eb; display: block; font-weight: 600; margin-bottom: 6px; }

/* Ajustes puntuales de buscadores ya existentes */
#search,
#task-search { background: #0b1220; color: #e5e7eb; border: 1px solid #334155; }

#client-info {
  margin-bottom: 12px;
  padding: 10px;
  background: #0b1220; /* oscuro acorde */
  border: 1px solid #1f2937;
  border-radius: 8px;
}
#client-info strong { color: #e5e7eb; font-weight: 700; }
#client-info span { color: #cbd5e1; font-size: 14px; }

.created-date { display: block; color: #9ca3af; font-size: 12px; margin-top: 4px; font-weight: 500; letter-spacing: .1px; }

.thumbnails { display: flex; gap: 8px; flex-wrap: wrap; overflow: hidden; max-height: 0; opacity: 0; transition: max-height 300ms cubic-bezier(.2,.8,.2,1), opacity 250ms ease; }
.thumbnails.visible { max-height: 600px; opacity: 1; }
.thumb { width: 80px; height: 60px; object-fit: cover; border-radius: 6px; border: 1px solid #3b445a; transition: transform 180ms ease, box-shadow 180ms ease; }
.thumb:hover { transform: scale(1.06); box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
.button-toggle-images { transition: background-color 160ms ease, transform 160ms ease; border-radius: 6px; }
.button-toggle-images:active { transform: scale(0.98); }

.collapsible { overflow: hidden; max-height: 0; opacity: 0; transition: max-height 300ms cubic-bezier(.2,.8,.2,1), opacity 250ms ease; }
.collapsible.expanded { max-height: 10000px; opacity: 1; overflow: visible; }

/* Estado colapsado explícito para listas plegables */
.collapsible.collapsed {
  max-height: 0 !important;
  opacity: 0 !important;
  overflow: hidden !important;
}

.toggle-list-btn { background: #374151; margin-left: 8px; border-radius: 6px; }

#tasks-calendar-btn { color: #ffffff; }

/* Separación mayor entre tareas */
#tasks li {
  padding: 18px;
  margin-bottom: 16px;
  border: 1px solid #1f2937;
  border-radius: 8px;
  background: #0b1220;
  transition: border-color 160ms ease, box-shadow 160ms ease, transform 120ms ease;
}
#tasks li:hover { border-color: #334155; box-shadow: 0 6px 18px rgba(0,0,0,0.45); }

/* Más espacio entre ítems de listas */
#errors li,
#tasks li {
  padding: 18px;
  margin-bottom: 16px;
  font-size: 16px;
  line-height: 1.6;
}

/* Separar bloques principales */
#errors-section,
#tasks-section {
  margin-top: 20px;
}

.actions-row { display: flex; align-items: center; gap: 10px; }
.actions-row .btn-update-apart { margin-left: auto; }

/* Alertas de tareas */
.task-alert {
  display: inline-block;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 13px;
  margin-bottom: 8px;
}
.task-alert.start-soon { background: #1f2937; border: 1px solid #3b82f6; color: #e0f2fe; }
.task-alert.end-soon { background: #1f2937; border: 1px solid #ef4444; color: #fee2e2; }

/* Animaciones para alertas */
@keyframes alert-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
@keyframes alert-pulse {
  0% { box-shadow: 0 0 0 0 rgba(239,68,68,0.7); }
  70% { box-shadow: 0 0 0 14px rgba(239,68,68,0); }
  100% { box-shadow: 0 0 0 0 rgba(239,68,68,0); }
}
.task-alert.start-soon { animation: alert-bounce 0.9s ease-in-out infinite; }
.task-alert.end-soon { animation: alert-pulse 1.0s ease-out infinite; }

/* Badge de estado en tareas */
.status-badge {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 12px;
  margin: 2px 0;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
}
/* En proceso: azul */
.status-in-progress {
  background: #3b82f6; /* blue */
  color: #0b2a5b; /* deep blue text for contrast */
  border: 1px solid #2563eb;
}
/* Detenida: naranja */
.status-paused {
  background: #f59e0b; /* orange */
  color: #1f2937; /* dark text */
  border: 1px solid #d97706;
}
/* Terminada: verde */
.status-completed {
  background: #10b981; /* green */
  color: #052e2b; /* deep green text */
  border: 1px solid #059669;
}

/* Reloj descendente para tareas en progreso */
.countdown {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  background: #0b1220;
  border: 1px solid #3b82f6;
  color: #dbeafe;
  border-radius: 999px;
  font-size: 12px;
}
.countdown .dot { width: 6px; height: 6px; border-radius: 50%; background: #3b82f6; animation: pulse-dot 1.2s ease-in-out infinite; }
@keyframes pulse-dot { 0%,100% { transform: scale(1); } 50% { transform: scale(1.5); } }

/* Topbar marquee: smoother motion on big screens */
@media (min-width: 768px) {
  .marquee-track { animation-duration: 36s; }
}

/* Responsive container & forms */
@media (max-width: 640px) {
  .container { padding: 20px; }
  h1 { font-size: 26px; }
  h2 { font-size: 20px; }
  button { font-size: 14px; }
}

/* Calendar modal grid: larger tap targets */
#cal-grid > div { padding: 10px; border-radius: 6px; background: #0b1220; border: 1px solid #1f2937; }
#cal-grid > div.has-tasks { border-color: #ef4444; color: #fee2e2; }

/* Payments list alignment */
#payments li { padding: 18px; }

/* Payments summary layout tweaks */
.payments-summary-box { width: 100%; }
.payments-summary { display:flex; gap:10px; align-items:flex-start; width:100%; justify-content:space-between; flex-wrap: wrap; }
.canvas-wrap { flex: 1 1 520px; min-width: 280px; padding: 8px; }
.legend { flex: 1 1 240px; min-width: 220px; }
.legend-item { padding: 6px 8px; }
.legend-label { font-size: 11px; }
.legend-value { font-size: 14px; min-width: auto; }

@media (max-width: 860px) {
  .payments-summary { gap: 8px; }
  .canvas-wrap { flex: 1 1 100%; min-width: 100%; }
  .legend { flex: 1 1 100%; min-width: 100%; display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 8px; }
  .legend-item { padding: 8px; }
}

@media (max-width: 480px) {
  .legend { grid-template-columns: 1fr; }
  .legend-item { display:flex; flex-wrap: nowrap; }
  .legend-label { font-size: 12px; }
  .legend-value { font-size: 15px; }
}

/* Confirm modal */
.modal-overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(2, 6, 23, 0.72); backdrop-filter: saturate(120%) blur(2px); z-index: 10000; }
.modal-overlay.show { display: flex; }
.confirm-modal { background: #111827; color: #e5e7eb; width: min(92vw, 440px); border-radius: 12px; border: 1px solid #1f2937; box-shadow: 0 18px 60px rgba(0,0,0,0.55); overflow: hidden; animation: modal-pop 160ms ease-out; }
.confirm-modal .modal-header { padding: 14px 16px; border-bottom: 1px solid #1f2937; font-weight: 700; letter-spacing: 0.2px; color: #f8fafc; }
.confirm-modal .modal-body { padding: 16px; font-size: 15px; color: #e5e7eb; }
.confirm-modal .modal-actions { padding: 12px 16px; border-top: 1px solid #1f2937; display: flex; gap: 8px; justify-content: flex-end; }
.confirm-modal .btn-cancel { background: #374151; color: #e5e7eb; border-radius: 8px; padding: 8px 12px; }
.confirm-modal .btn-cancel:hover { background: #314055; }
.confirm-modal .btn-danger { background: #ef4444; color: #fff; border-radius: 8px; padding: 8px 12px; }
.confirm-modal .btn-danger:hover { background: #dc2626; }

/* Visually align filter rows across sections */
.filters-row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.filters-row label { display: inline-flex; align-items: center; gap: 8px; margin: 0; }
.filters-row select,
.filters-row input[type="text"],
.filters-row input[type="number"],
.filters-row input[type="month"] {
  height: 36px;
  padding: 6px 10px;
}
.filters-row button { height: 36px; padding: 6px 10px; }

/* Compact filters: align controls on a single line */
.filters-row {
  display: flex;
  flex-wrap: nowrap; /* force single line; horizontal scroll if overflow */
  align-items: center;
  gap: 8px;
  overflow-x: auto;
  padding: 4px 0;
}
.filters-row label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
  margin: 0; /* remove extra spacing */
}
.filters-row select,
.filters-row input[type="text"],
.filters-row input[type="number"],
.filters-row input[type="month"] {
  font-size: 12px;
  padding: 4px 6px;
  height: 28px;
  border-radius: 6px;
  max-width: 140px; /* shrink inputs so all fit */
}
.filters-row button {
  font-size: 12px;
  padding: 4px 6px;
  height: 28px;
  border-radius: 6px;
}

/* Optional: smaller search inputs to match compact filters */
#search,
#task-search,
#payments-search,
#payment-search {
  font-size: 13px;
  padding: 6px 8px;
}

@keyframes modal-pop { from { opacity: 0; transform: translateY(6px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Align legend with chart: add vertical breathing space */
.legend { margin-top: 8px; }
.legend-item { margin-bottom: 4px; }

/* Make the payments list match the summary box styling and width */
#payments {
  width: 100%;
  background: #0a0f1e;
  border: 1px solid #1f2937;
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}

/* Ensure spacing between payments box and summary box */
#payments + .payments-summary-box { margin-top: 12px; }

/* Tasks board columns and task cards */
.tasks-board { display: grid; grid-template-columns: repeat(12, 1fr); gap: 10px; margin-top: 12px; }
.tasks-hour { background: #0b1220; border: 1px solid #1f2937; border-radius: 10px; min-height: 180px; padding: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.3); display:flex; flex-direction:column; gap:8px; }
.tasks-hour-header { display:flex; align-items:center; justify-content:space-between; color:#cbd5e1; font-weight:600; font-size:13px; margin-bottom:4px; }
.tasks-hour-drop { flex:1; display:flex; flex-direction:column; gap:8px; }
.task-card { position: relative; background:#0f172a; border:1px solid #374151; border-radius:10px; padding:8px 10px; color:#e5e7eb; box-shadow:0 8px 24px rgba(0,0,0,0.35); display:flex; flex-direction:column; gap:6px; }
.task-card-title { font-weight:700; font-size:14px; }
.task-card-meta { display:flex; align-items:center; justify-content:space-between; font-size:12px; color:#94a3b8; }
.task-card-tags { font-size:11px; color:#9ca3af; }
.task-card-edit { position:absolute; right:8px; top:8px; background:#374151; color:#e5e7eb; border:none; border-radius:6px; padding:4px 6px; cursor:pointer; font-size:12px; }
.task-card-edit:hover { background:#4b5563; }
.sortable-ghost { opacity: 0.6; }
.sortable-drag { cursor: grabbing; }

/* Alineación uniforme para el modal de formulario */
.form-modal label {
  display: block;
  font-size: 0.95rem;
  color: #e5e7eb;
  margin-top: 8px;
}
.form-modal input[type="text"],
.form-modal input[type="file"],
.form-modal textarea {
  width: 100%;
  box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 10px;
  padding: 8px 10px;
  border: 1px solid #1f2937;
  border-radius: 8px;
  background: #0b1220;
  color: #e5e7eb;
}
.form-modal textarea { resize: vertical; }

/* Modo censura: oculta textos sensibles */
.censored .sensitive,
.censored .message,
.censored .solution {
  filter: blur(6px);
}